(this["webpackJsonpworkout-app"]=this["webpackJsonpworkout-app"]||[]).push([[0],{264:function(t,e){},265:function(t,e){},273:function(t,e){},276:function(t,e){},277:function(t,e){},279:function(t,e,n){"use strict";n.r(e);var i=n(57),o=n(66),r=n(233),c=n.n(r),s=n(4),a=n.n(s),u=n(11),h=n(6),p=(n(278),n(190)),l="aqua";function f(t,e,n,i,o){var r=Object(h.a)(t,2),c=r[0],s=r[1],a=Object(h.a)(e,2),u=a[0],p=a[1];o.beginPath(),o.moveTo(s*i,c*i),o.lineTo(p*i,u*i),o.lineWidth=2,o.strokeStyle=n,o.stroke()}function d(t,e,n,i,o){t.beginPath(),t.arc(n,e,i,0,2*Math.PI),t.fillStyle=o,t.fill()}var b=n(253),j=n.n(b),v=function(t){var e=t.keypoints;return[g(e[5].position,e[9].position,e[7].position),g(e[6].position,e[10].position,e[8].position),g(e[7].position,e[11].position,e[5].position),g(e[8].position,e[12].position,e[6].position),g(e[5].position,e[13].position,e[11].position),g(e[6].position,e[14].position,e[12].position),g(e[11].position,e[15].position,e[13].position),g(e[12].position,e[16].position,e[14].position)]},g=function(t,e,n){var i=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return 180*Math.acos((o*o+i*i-r*r)/(2*o*i))/Math.PI},x={position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480},O={visibility:"hidden",marginLeft:"auto",marginRight:"auto",left:0,right:0,width:640,height:480},y=function(){var t=Object(o.useRef)(!0),e=Object(o.useRef)(null),n=Object(o.useRef)(null),r=Object(o.useState)(!0),c=Object(h.a)(r,2),s=c[0],b=c[1],g=Object(o.useState)(null),y=Object(h.a)(g,2),w=(y[0],y[1],Object(o.useState)(null)),m=Object(h.a)(w,2),k=m[0],M=m[1];Object(o.useEffect)((function(){return function(){t.current=!1}}),[]),Object(o.useEffect)((function(){p.b({architecture:"ResNet50",outputStride:16,inputResolution:{width:640,height:480},quantBytes:4}).then((function(e){t.current&&M(e)}))}),[]);var S=function(){var t=Object(u.a)(a.a.mark((function t(){var n,i,o,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof e.current||null===e.current||4!==e.current.video.readyState||null===k){t.next=13;break}return n=e.current.video,i=e.current.video.videoWidth,o=e.current.video.videoHeight,e.current.video.width=i,e.current.video.height=o,t.next=8,k.estimateSinglePose(n,{flipHorizontal:!1});case 8:r=t.sent,b(!1),console.log(v(r)),console.log(r),R(r,n);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(t,e){var i=n.current.getContext("2d");n.current.width=e.videoWidth,n.current.height=e.videoHeight,function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=0;o<t.length;o++){var r=t[o];if(!(r.score<e)){var c=r.position;d(n,c.y*i,c.x*i,3,l)}}}(t.keypoints,.6,i),function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;function o(t){return[t.y,t.x]}p.a(t,e).forEach((function(t){f(o(t[0].position),o(t[1].position),l,i,n)}))}(t.keypoints,.7,i)};return Object(i.jsxs)("div",{className:"container text-center",children:[Object(i.jsxs)("header",{children:[Object(i.jsx)("h1",{children:"Workout application"}),Object(i.jsx)("hr",{})]}),Object(i.jsxs)("main",{children:[s&&Object(i.jsx)("h2",{children:"Loading..."}),Object(i.jsx)(j.a,{ref:e,style:x}),Object(i.jsx)("canvas",{ref:n,style:x}),Object(i.jsx)("div",{className:"mb-5",style:O}),Object(i.jsx)("button",{className:"btn btn-primary",onClick:function(){setTimeout((function(){S()}),1500)},children:"Start/Stop"})]}),Object(i.jsx)("footer",{children:"Made by Jes\xfas Gonz\xe1lez \xc1lvarez"})]})};c.a.render(Object(i.jsx)(y,{}),document.getElementById("root"))}},[[279,1,2]]]);
//# sourceMappingURL=main.a557e3b5.chunk.js.map